# Контрольная 3: вариант 3
## Задача
1. Разработать API используя PHP в качестве серверного языка.  
### Спецификации API 
Корень API должен располагаться в ```/api``` на вашем веб-сайте. 
Большинство запросов должны содержать хэдер ```Authorization: Bearer <token>```. 

Спецификация API: https://app.swaggerhub.com/apis-docs/alexkupriyanov/codeHedgehog_api/1.0.0

Обращайте внимание не только на endpoint's, но и на модели внизу страницы.

Также в репозитории присутствует локальная версия описания API, на случай, если доступ по указанной ссылке будет невозможен. 

Разрабатываемое API должно позволить управлять сайтом с задачами по программирвоанию - управлять пользователями, задачами, темами, решениями задач. Все запросы, если не указано иного в теле передают данные в формате JSON. ТАкже все ответы, если не указано иного также выдают данные в JSON. 
 
### Как сдать задачу 
1. Запушить свой код в этот репозиторий.
2. Создать дамп БД (экспорт в phpMyAdmin) и также поместить его в этот репозиторий. 
3. Создать файл instructions.md в котором вы должны описать все логины-пароли для проверки (для пользователей), а также можете указать инструкции по проверке. 

## Система оценивания и пояснения к API
### Общие требования
Старайтесь делать код читаемым, писать комментарии время от времени. 
За качественный код / архитектуру / комментарии по делу и прочие вещи, которые приятно удивят, будет поставлен бонус. 
Обязательно положите дамп БД и пароли, как указано в задании выше, за это также полагается бонус. 

Не забывайте возвращать корректные статусы и сообщения об ошибке при наличии (см [Спецификацию](https://app.swaggerhub.com/apis-docs/alexkupriyanov/codeHedgehog_api/1.0.0) с примерами и описанием)
**Стоимость**: до 1 балла. 

### Аутентификация
Должена работать возможность войти, выйти, зарегистрироваться. В системе должно быть 2 роли - админ и обычный пользователь. 
* Возможность войти. **Стоимость**: 0,5
* Возможность зарегистрироваться. **Стоимость**: 0,5
* Предсозданные роли: 0,25. 
* Возможность выйти (токен в БД аннулируется). **Стоимость**: 0,5.

### Работа с пользователями
Все операции с пользователями, кроме обновления самого себя доступны только админу. 
* Просмотр списка пользователей. **Стоимость**: 0,5
* Просмотр конкретного пользователя. **Стоимость**: 0,25
* Изменение пользователя доступно администратору и самому себе (то есть если редактируемый пользователь это тот же пользователь, с чьим токеном передан запрос). **Стоимость**: 0,25
* Удаление пользователя. **Стоимость**: 0,25
* Изменение роли пользователя. **Стоимость**: 0,25
* Контроль прав доступа: **Стоимость**: 0,25

### Роли
В системе должно быть 2 роли (можно и больше) - обычный пользователь и администратор. 
*  Список ролей, доступно авторизованным пользователям. **Стоимость**: 0,25. 
*  Получение данных о конкретной роли, доступно авторизованным пользователям. **Стоимость**: 0,25.
* Контроль прав доступа: **Стоимость**: 0,25
* 
### Темы
В системе должна присутствовать возможность управления темами задачи. У каждой темы может быть родительсная тема. 
* Просмотр списка тем, доступно всем. **Стоимость**: 0,25
  * Фильтрация. Подразумевается поиск подстроки, а не полное совпадение строк. **Стоимость**: +0,5
  * Сложная фильтраця. Подразумевается поиск по теме с учётом иерархии, это значит, что в список попадают не не только по темы с указанным ID, но и все темы, которые являются "дочерними" для выбранной. **Стоимость**: +0,5 (суммируется с обычной фильтрацией)
* Создание темы, доступно только администратору. **Стоимость**: 0,5
* Просмотр конкретной темы, доступно всем. При просмотре темы также должны быть доступны все задачи по теме. **Стоимость**: 0,5
* Изменение темы, доступно только админу. **Стоимость**: 0,25
* Удаление темы, доступно только админу. После удаления темы, все задачи, связанные с темой должны быть обновлены - тема должна быть установлена на NULL. **Стоимость**: 0,5
* Поулчение списка задач по теме, доступно всем. **Стоимость**: 0,25
* Массовое добавление подтем к теме, доступно только админу. **Стоимость**: 0,25
* Массовое удаление подтем из темы, доступно только админу. **Стоимость**: 0,25 
* Контроль прав доступа: **Стоимость**: 0,25

### Задачи
* Просмотр списка задач, доступно всем. Однако список задач админа включает ВСЕ существующие задачи, в то время, как остальные пользователи получают задачи у который аттрибут ```isDraft === false```. **Стоимость**: 0,5
  * Фильтрация. Подразумевается поиск подстроки, а не полное совпадение строк. **Стоимость**: +0,5
  * Сложная фильтраця. Подразумевается поиск по теме с учётом иерархии, это значит, что в список попадают не не только по темы с указанным ID, но и все темы, которые являются "дочерними" для выбранной. **Стоимость**: +0,5 (суммируется с обычной фильтрацией)
* Содание задачи, доступно администратору. **Стоимость**: 0,5
* Просмотр конкретной задачи, доступно всем, если ```isDraft === false```, иначе только админу. **Стоимость**: 0,25
* Редактирование задачи, доступно только админу. **Стоимость**: 0,5
* Удаление задачи, доступно только админу. **Стоимость**: 0,25
* Просмотр файлов входных и выходных данных, доступно всем. **Стоимость**: 0,25
* Создание входных и выходных файлов, доступно админу. Для передачи файлов используется FORM-DATA. **Стоимость**: 0,5
* Удаление файлов входных и выходных данных, доступно админу. **Стоимость**: 0,25
* Контроль прав доступа: **Стоимость**: 0,25

### Решения
* Создание решения, доступно авторизованному пользователю. **Стоимость**: 0,25
* Получить список решений, доступно админу и автору решений (юзем может получить только свои решения). **Стоимость**: 0,25
  * Фильтрация. **Стоимость**: 0,5
*  Изменение статуса решения, доступно только админу. Доступные вердикты: "Pending", "OK", "Rejected". **Стоимость**: 0,25
* Контроль прав доступа: **Стоимость**: 0,25



